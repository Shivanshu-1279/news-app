{"ast":null,"code":"import _regeneratorRuntime from\"D:/Shivanshu Folder/learning/React3/news-app/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"D:/Shivanshu Folder/learning/React3/news-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"D:/Shivanshu Folder/learning/React3/news-app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect}from\"react\";import NewsItem from\"./NewsItem\";import Spinner from'./Spinner';import InfiniteScroll from\"react-infinite-scroll-component\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var News=function News(props){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),articles=_useState2[0],setArticles=_useState2[1];var _useState3=useState(true),_useState4=_slicedToArray(_useState3,2),loading=_useState4[0],setLoading=_useState4[1];var _useState5=useState(-1),_useState6=_slicedToArray(_useState5,2),page=_useState6[0],setPage=_useState6[1];var _useState7=useState(0),_useState8=_slicedToArray(_useState7,2),totalResults=_useState8[0],setTotalResults=_useState8[1];var capitalizeFirstLetter=function capitalizeFirstLetter(string){return string.charAt(0).toUpperCase()+string.slice(1);};// Title will change according to the category we are reading and a function is used which will make the first letter capital.\ndocument.title=\"\".concat(capitalizeFirstLetter(props.category),\" -NewsApp\");// we have created an updation function which can be used in previous and forward page \nvar updation=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var url,data,parsedData;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:props.setProgress(30);setPage(2);url=\"https://newsapi.org/v2/top-headlines?country=\".concat(props.country,\"&category=\").concat(props.category,\"&apiKey=e8adac170d874fd296098e16fed2f214&page=\").concat(page,\"&pageSize=\").concat(props.pageSize);// let url = `https://gnews.io/api/v4/top-headlines?country=${props.country}&lang=en&topic=${props.category}&token=c59ec6468a508ce0f6e69e1efabcd08e&page=${page}&pagesize=${props.pagesize}`;\nsetLoading(true);_context.next=6;return fetch(url);case 6:data=_context.sent;_context.next=9;return data.json();case 9:parsedData=_context.sent;props.setProgress(70);// console.log(parsedData);\nsetArticles(parsedData.articles);setTotalResults(parsedData.totalResults);setLoading(false);props.setProgress(100);case 15:case\"end\":return _context.stop();}},_callee);}));return function updation(){return _ref.apply(this,arguments);};}();useEffect(function(){updation();},[]);var fetchMoreData=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(){var url,data,parsedData;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:setPage(page+1);url=\"https://newsapi.org/v2/top-headlines?country=\".concat(props.country,\"&category=\").concat(props.category,\"&apiKey=e8adac170d874fd296098e16fed2f214&page=\").concat(page,\"&pageSize=\").concat(props.pageSize);// let url = `https://gnews.io/api/v4/top-headlines?country=${props.country}&lang=en&topic=${props.category}&token=c59ec6468a508ce0f6e69e1efabcd08e&page=${page}&pagesize=${props.pagesize}`;\n_context2.next=4;return fetch(url);case 4:data=_context2.sent;_context2.next=7;return data.json();case 7:parsedData=_context2.sent;setArticles(articles.concat(parsedData.articles));setTotalResults(parsedData.totalResults);// setloading(false)\ncase 10:case\"end\":return _context2.stop();}},_callee2);}));return function fetchMoreData(){return _ref2.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"h1\",{className:\"text-center my-23\",style:{marginTop:'96px'},children:[\" \",/*#__PURE__*/_jsxs(\"strong\",{style:{fontStyle:'italic',fontSize:'41px'},children:[\"Top Headlines on- \",capitalizeFirstLetter(props.category)]}),\" \"]}),loading&&/*#__PURE__*/_jsx(Spinner,{}),/*#__PURE__*/_jsx(InfiniteScroll,{dataLength:articles,next:fetchMoreData,hasMore:articles.length!==totalResults,loader:/*#__PURE__*/_jsx(Spinner,{}),children:/*#__PURE__*/_jsx(\"div\",{className:\"container\",style:{paddingTop:'24'},children:/*#__PURE__*/_jsx(\"div\",{className:\"row\",style:{paddingTop:'24'},children:articles.map(function(element){return/*#__PURE__*/_jsx(\"div\",{className:\"col-md-4 my-2\",children:/*#__PURE__*/_jsx(NewsItem,{title:element.title?element.title.slice(0,50):\"\",description:element.description?element.description.slice(0,190):\"\",imageUrl:element.urlToImage,newsURL:element.url,author:element.author,date:element.publishedAt,name:element.source.name})},element.url);})})})})]});News.defaultProps={country:\"in\",pageSize:8,category:'general'};};export default News;","map":{"version":3,"names":["React","useState","useEffect","NewsItem","Spinner","InfiniteScroll","News","props","articles","setArticles","loading","setLoading","page","setPage","totalResults","setTotalResults","capitalizeFirstLetter","string","charAt","toUpperCase","slice","document","title","category","updation","setProgress","url","country","pageSize","fetch","data","json","parsedData","fetchMoreData","concat","marginTop","fontStyle","fontSize","length","paddingTop","map","element","description","urlToImage","author","publishedAt","source","name","defaultProps"],"sources":["D:/Shivanshu Folder/learning/React3/news-app/src/Components/News.js"],"sourcesContent":["import React, { useState , useEffect } from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport NewsItem from \"./NewsItem\";\r\nimport Spinner from './Spinner'\r\nimport InfiniteScroll from \"react-infinite-scroll-component\";\r\n              \r\n const News=(props)=> {\r\n  const [articles, setArticles] = useState([])\r\n  const [loading, setLoading] = useState(true)\r\n  const [page, setPage] = useState(-1)\r\n  const [totalResults, setTotalResults] = useState(0)\r\n  \r\n const capitalizeFirstLetter=(string)=>{\r\n    return string.charAt(0).toUpperCase() + string.slice(1);\r\n}\r\n          \r\n    // Title will change according to the category we are reading and a function is used which will make the first letter capital.\r\n      document.title=`${capitalizeFirstLetter(props.category)} -NewsApp`;\r\n  \r\n                                                                                                  \r\n// we have created an updation function which can be used in previous and forward page \r\nconst updation = async()=> {\r\n  props.setProgress(30);\r\n  setPage(2);\r\n  let url =\r\n    `https://newsapi.org/v2/top-headlines?country=${props.country}&category=${props.category}&apiKey=e8adac170d874fd296098e16fed2f214&page=${page}&pageSize=${props.pageSize}`;     \r\n    \r\n// let url = `https://gnews.io/api/v4/top-headlines?country=${props.country}&lang=en&topic=${props.category}&token=c59ec6468a508ce0f6e69e1efabcd08e&page=${page}&pagesize=${props.pagesize}`;\r\n  \r\nsetLoading(true);\r\n  let data = await fetch(url);\r\n  // props.setProgress(30);\r\n  // console.log(data);\r\n  let parsedData = await data.json();\r\n  props.setProgress(70);\r\n  // console.log(parsedData);\r\n  setArticles(parsedData.articles)\r\n  setTotalResults(parsedData.totalResults)\r\n  setLoading(false)\r\n  props.setProgress(100);\r\n};\r\n                     \r\n\r\n  useEffect(() => {\r\n    updation(); \r\n}, [])\r\n                                                      \r\nconst fetchMoreData = async () =>{\r\n  setPage(page+1);\r\n  let url =\r\n   `https://newsapi.org/v2/top-headlines?country=${props.country}&category=${props.category}&apiKey=e8adac170d874fd296098e16fed2f214&page=${page}&pageSize=${props.pageSize}`;\r\n   \r\n  // let url = `https://gnews.io/api/v4/top-headlines?country=${props.country}&lang=en&topic=${props.category}&token=c59ec6468a508ce0f6e69e1efabcd08e&page=${page}&pagesize=${props.pagesize}`;\r\n \r\n  let data = await fetch(url);\r\n let parsedData = await data.json();\r\n   setArticles(articles.concat(parsedData.articles))\r\n   setTotalResults(parsedData.totalResults)\r\n   // setloading(false)\r\n };\r\n                           \r\n                                     \r\n   return (\r\n      <>\r\n        <h1 className=\"text-center my-23\" style={{marginTop:'96px'}}>\r\n          {\" \"}\r\n          <strong style={{fontStyle:'italic', fontSize:'41px'}} >Top Headlines on- {capitalizeFirstLetter(props.category)}</strong>{\" \"}\r\n        </h1>\r\n        {loading &&<Spinner/>}\r\n        {/* {<Spinner/>} */}\r\n        <InfiniteScroll\r\n          dataLength={articles}\r\n          next={fetchMoreData}\r\n          hasMore={articles.length!==totalResults}\r\n          loader={<Spinner/>}\r\n        >\r\n        <div className=\"container\"  style={{paddingTop:'24'}}>\r\n        <div className=\"row\" style={{paddingTop:'24'}}>\r\n          {articles.map((element) => {\r\n            return (\r\n              <div className=\"col-md-4 my-2\" key={element.url}>\r\n                <NewsItem \r\n                  title={element.title ? element.title.slice(0, 50) : \"\"}\r\n                  description={ element.description ? element.description.slice(0, 190) : \"\"}\r\n                  imageUrl={element.urlToImage}\r\n                  newsURL={element.url}\r\n                  author={element.author}\r\n                  date = {element.publishedAt}\r\n                  name = {element.source.name}\r\n                />\r\n                  </div>\r\n            );\r\n          })}\r\n              </div>\r\n        </div>\r\n        </InfiniteScroll>\r\n        </>\r\n    );\r\n  \r\n      \r\nNews.defaultProps={\r\n  country:\"in\",\r\n  pageSize:8,\r\n  category: 'general',\r\n}\r\n                                            \r\nNews.propTypes={\r\ncountry: PropTypes.string,\r\npageSize:PropTypes.number,\r\ncategory: PropTypes.string,\r\n}\r\n\r\n}\r\n\r\nexport default News;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}